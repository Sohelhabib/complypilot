{"dependencies":[{"name":"react","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":1,"column":0,"index":0},"end":{"line":1,"column":49,"index":49}}],"key":"RtGiGa+/H7VrI7GDQDLhO1UbpU8=","exportNames":["*"],"imports":1}},{"name":"react-native-web/dist/exports/View","data":{"asyncType":null,"isESMImport":false,"locs":[],"key":"4kYBDC6LJJXoH7P9rWDi3vkLVB0=","exportNames":["*"],"imports":1}},{"name":"react-native-web/dist/exports/StyleSheet","data":{"asyncType":null,"isESMImport":false,"locs":[],"key":"MK7+k1V+KnvCVW7Kj2k/ydtjmVU=","exportNames":["*"],"imports":1}},{"name":"expo-router","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":3,"column":0,"index":105},"end":{"line":3,"column":40,"index":145}}],"key":"/+ErnBisjrT6aDU+GRp5Qz/lYoY=","exportNames":["*"],"imports":1}},{"name":"../src/context/AuthContext","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":4,"column":0,"index":146},"end":{"line":4,"column":53,"index":199}}],"key":"YFOiIQT6E6I699spMpMTUXmic+k=","exportNames":["*"],"imports":1}},{"name":"../src/components/LoadingScreen","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":5,"column":0,"index":200},"end":{"line":5,"column":64,"index":264}}],"key":"hvRn6/xKdqj61ncZeFCUaBw1KU4=","exportNames":["*"],"imports":1}},{"name":"../src/utils/theme","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":6,"column":0,"index":265},"end":{"line":6,"column":43,"index":308}}],"key":"qK0DKJeSaeFiWAj5xn3qkpKNWIQ=","exportNames":["*"],"imports":1}},{"name":"react/jsx-dev-runtime","data":{"asyncType":null,"isESMImport":false,"locs":[],"key":"L9D70Z4hi4aGuui1ysja/oQ5ytI=","exportNames":["*"],"imports":1}}],"output":[{"data":{"code":"__d(function (global, require, _$$_IMPORT_DEFAULT, _$$_IMPORT_ALL, module, exports, _dependencyMap) {\n  \"use strict\";\n\n  var _jsxFileName = \"/app/frontend/app/auth-callback.tsx\",\n    _s = $RefreshSig$();\n  Object.defineProperty(exports, '__esModule', {\n    value: true\n  });\n  function _interopDefault(e) {\n    return e && e.__esModule ? e : {\n      default: e\n    };\n  }\n  Object.defineProperty(exports, \"default\", {\n    enumerable: true,\n    get: function () {\n      return AuthCallback;\n    }\n  });\n  var _react = require(_dependencyMap[0], \"react\");\n  var _reactNativeWebDistExportsView = require(_dependencyMap[1], \"react-native-web/dist/exports/View\");\n  var View = _interopDefault(_reactNativeWebDistExportsView);\n  var _reactNativeWebDistExportsStyleSheet = require(_dependencyMap[2], \"react-native-web/dist/exports/StyleSheet\");\n  var StyleSheet = _interopDefault(_reactNativeWebDistExportsStyleSheet);\n  var _expoRouter = require(_dependencyMap[3], \"expo-router\");\n  var _srcContextAuthContext = require(_dependencyMap[4], \"../src/context/AuthContext\");\n  var _srcComponentsLoadingScreen = require(_dependencyMap[5], \"../src/components/LoadingScreen\");\n  var _srcUtilsTheme = require(_dependencyMap[6], \"../src/utils/theme\");\n  var _reactJsxDevRuntime = require(_dependencyMap[7], \"react/jsx-dev-runtime\");\n  function AuthCallback() {\n    _s();\n    const router = (0, _expoRouter.useRouter)();\n    const {\n      login,\n      setUser\n    } = (0, _srcContextAuthContext.useAuth)();\n    const hasProcessed = (0, _react.useRef)(false);\n    (0, _react.useEffect)(() => {\n      // Use useRef to prevent double processing in StrictMode\n      if (hasProcessed.current) return;\n      hasProcessed.current = true;\n      const processAuth = async () => {\n        try {\n          // Get session_id from URL hash\n          let sessionId = null;\n          if (typeof window !== 'undefined') {\n            const hash = window.location.hash;\n            const params = new URLSearchParams(hash.replace('#', ''));\n            sessionId = params.get('session_id');\n          }\n          if (!sessionId) {\n            console.error('No session_id found in URL');\n            router.replace('/');\n            return;\n          }\n\n          // Exchange session_id for session_token\n          await login(sessionId);\n\n          // Clean up URL and redirect to dashboard\n          if (typeof window !== 'undefined') {\n            window.history.replaceState({}, document.title, window.location.pathname);\n          }\n          router.replace('/(tabs)/dashboard');\n        } catch (error) {\n          console.error('Auth callback error:', error);\n          router.replace('/');\n        }\n      };\n      processAuth();\n    }, [login, router]);\n    return /*#__PURE__*/(0, _reactJsxDevRuntime.jsxDEV)(View.default, {\n      style: styles.container,\n      children: /*#__PURE__*/(0, _reactJsxDevRuntime.jsxDEV)(_srcComponentsLoadingScreen.LoadingScreen, {\n        message: \"Completing sign in...\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 55,\n        columnNumber: 7\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 54,\n      columnNumber: 5\n    }, this);\n  }\n  _s(AuthCallback, \"iZ7TuO7cn7hCwanSZ61/tFsihHw=\", false, function () {\n    return [_expoRouter.useRouter, _srcContextAuthContext.useAuth];\n  });\n  _c = AuthCallback;\n  const styles = StyleSheet.default.create({\n    container: {\n      flex: 1,\n      backgroundColor: _srcUtilsTheme.theme.colors.background\n    }\n  });\n  var _c;\n  $RefreshReg$(_c, \"AuthCallback\");\n});","lineCount":99,"map":[[14,2,8,15,"Object"],[14,8,8,15],[14,9,8,15,"defineProperty"],[14,23,8,15],[14,24,8,15,"exports"],[14,31,8,15],[15,4,8,15,"enumerable"],[15,14,8,15],[16,4,8,15,"get"],[16,7,8,15],[16,18,8,15,"get"],[16,19,8,15],[17,6,8,15],[17,13,8,15,"AuthCallback"],[17,25,8,15],[18,4,8,15],[19,2,8,15],[20,2,1,0],[20,6,1,0,"_react"],[20,12,1,0],[20,15,1,0,"require"],[20,22,1,0],[20,23,1,0,"_dependencyMap"],[20,37,1,0],[21,2,1,49],[21,6,1,49,"_reactNativeWebDistExportsView"],[21,36,1,49],[21,39,1,49,"require"],[21,46,1,49],[21,47,1,49,"_dependencyMap"],[21,61,1,49],[22,2,1,49],[22,6,1,49,"View"],[22,10,1,49],[22,13,1,49,"_interopDefault"],[22,28,1,49],[22,29,1,49,"_reactNativeWebDistExportsView"],[22,59,1,49],[23,2,1,49],[23,6,1,49,"_reactNativeWebDistExportsStyleSheet"],[23,42,1,49],[23,45,1,49,"require"],[23,52,1,49],[23,53,1,49,"_dependencyMap"],[23,67,1,49],[24,2,1,49],[24,6,1,49,"StyleSheet"],[24,16,1,49],[24,19,1,49,"_interopDefault"],[24,34,1,49],[24,35,1,49,"_reactNativeWebDistExportsStyleSheet"],[24,71,1,49],[25,2,3,0],[25,6,3,0,"_expoRouter"],[25,17,3,0],[25,20,3,0,"require"],[25,27,3,0],[25,28,3,0,"_dependencyMap"],[25,42,3,0],[26,2,4,0],[26,6,4,0,"_srcContextAuthContext"],[26,28,4,0],[26,31,4,0,"require"],[26,38,4,0],[26,39,4,0,"_dependencyMap"],[26,53,4,0],[27,2,5,0],[27,6,5,0,"_srcComponentsLoadingScreen"],[27,33,5,0],[27,36,5,0,"require"],[27,43,5,0],[27,44,5,0,"_dependencyMap"],[27,58,5,0],[28,2,6,0],[28,6,6,0,"_srcUtilsTheme"],[28,20,6,0],[28,23,6,0,"require"],[28,30,6,0],[28,31,6,0,"_dependencyMap"],[28,45,6,0],[29,2,6,43],[29,6,6,43,"_reactJsxDevRuntime"],[29,25,6,43],[29,28,6,43,"require"],[29,35,6,43],[29,36,6,43,"_dependencyMap"],[29,50,6,43],[30,2,8,15],[30,11,8,24,"AuthCallback"],[30,23,8,36,"AuthCallback"],[30,24,8,36],[30,26,8,39],[31,4,8,39,"_s"],[31,6,8,39],[32,4,9,2],[32,10,9,8,"router"],[32,16,9,14],[32,19,9,17],[32,23,9,17,"useRouter"],[32,34,9,26],[32,35,9,26,"useRouter"],[32,44,9,26],[32,46,9,27],[32,47,9,28],[33,4,10,2],[33,10,10,8],[34,6,10,10,"login"],[34,11,10,15],[35,6,10,17,"setUser"],[36,4,10,25],[36,5,10,26],[36,8,10,29],[36,12,10,29,"useAuth"],[36,34,10,36],[36,35,10,36,"useAuth"],[36,42,10,36],[36,44,10,37],[36,45,10,38],[37,4,11,2],[37,10,11,8,"hasProcessed"],[37,22,11,20],[37,25,11,23],[37,29,11,23,"useRef"],[37,35,11,29],[37,36,11,29,"useRef"],[37,42,11,29],[37,44,11,30],[37,49,11,35],[37,50,11,36],[38,4,13,2],[38,8,13,2,"useEffect"],[38,14,13,11],[38,15,13,11,"useEffect"],[38,24,13,11],[38,26,13,12],[38,32,13,18],[39,6,14,4],[40,6,15,4],[40,10,15,8,"hasProcessed"],[40,22,15,20],[40,23,15,21,"current"],[40,30,15,28],[40,32,15,30],[41,6,16,4,"hasProcessed"],[41,18,16,16],[41,19,16,17,"current"],[41,26,16,24],[41,29,16,27],[41,33,16,31],[42,6,18,4],[42,12,18,10,"processAuth"],[42,23,18,21],[42,26,18,24],[42,32,18,24,"processAuth"],[42,33,18,24],[42,38,18,36],[43,8,19,6],[43,12,19,10],[44,10,20,8],[45,10,21,8],[45,14,21,12,"sessionId"],[45,23,21,36],[45,26,21,39],[45,30,21,43],[46,10,23,8],[46,14,23,12],[46,21,23,19,"window"],[46,27,23,25],[46,32,23,30],[46,43,23,41],[46,45,23,43],[47,12,24,10],[47,18,24,16,"hash"],[47,22,24,20],[47,25,24,23,"window"],[47,31,24,29],[47,32,24,30,"location"],[47,40,24,38],[47,41,24,39,"hash"],[47,45,24,43],[48,12,25,10],[48,18,25,16,"params"],[48,24,25,22],[48,27,25,25],[48,31,25,29,"URLSearchParams"],[48,46,25,44],[48,47,25,45,"hash"],[48,51,25,49],[48,52,25,50,"replace"],[48,59,25,57],[48,60,25,58],[48,63,25,61],[48,65,25,63],[48,67,25,65],[48,68,25,66],[48,69,25,67],[49,12,26,10,"sessionId"],[49,21,26,19],[49,24,26,22,"params"],[49,30,26,28],[49,31,26,29,"get"],[49,34,26,32],[49,35,26,33],[49,47,26,45],[49,48,26,46],[50,10,27,8],[51,10,29,8],[51,14,29,12],[51,15,29,13,"sessionId"],[51,24,29,22],[51,26,29,24],[52,12,30,10,"console"],[52,19,30,17],[52,20,30,18,"error"],[52,25,30,23],[52,26,30,24],[52,54,30,52],[52,55,30,53],[53,12,31,10,"router"],[53,18,31,16],[53,19,31,17,"replace"],[53,26,31,24],[53,27,31,25],[53,30,31,28],[53,31,31,29],[54,12,32,10],[55,10,33,8],[57,10,35,8],[58,10,36,8],[58,16,36,14,"login"],[58,21,36,19],[58,22,36,20,"sessionId"],[58,31,36,29],[58,32,36,30],[60,10,38,8],[61,10,39,8],[61,14,39,12],[61,21,39,19,"window"],[61,27,39,25],[61,32,39,30],[61,43,39,41],[61,45,39,43],[62,12,40,10,"window"],[62,18,40,16],[62,19,40,17,"history"],[62,26,40,24],[62,27,40,25,"replaceState"],[62,39,40,37],[62,40,40,38],[62,41,40,39],[62,42,40,40],[62,44,40,42,"document"],[62,52,40,50],[62,53,40,51,"title"],[62,58,40,56],[62,60,40,58,"window"],[62,66,40,64],[62,67,40,65,"location"],[62,75,40,73],[62,76,40,74,"pathname"],[62,84,40,82],[62,85,40,83],[63,10,41,8],[64,10,43,8,"router"],[64,16,43,14],[64,17,43,15,"replace"],[64,24,43,22],[64,25,43,23],[64,44,43,42],[64,45,43,43],[65,8,44,6],[65,9,44,7],[65,10,44,8],[65,17,44,15,"error"],[65,22,44,20],[65,24,44,22],[66,10,45,8,"console"],[66,17,45,15],[66,18,45,16,"error"],[66,23,45,21],[66,24,45,22],[66,46,45,44],[66,48,45,46,"error"],[66,53,45,51],[66,54,45,52],[67,10,46,8,"router"],[67,16,46,14],[67,17,46,15,"replace"],[67,24,46,22],[67,25,46,23],[67,28,46,26],[67,29,46,27],[68,8,47,6],[69,6,48,4],[69,7,48,5],[70,6,50,4,"processAuth"],[70,17,50,15],[70,18,50,16],[70,19,50,17],[71,4,51,2],[71,5,51,3],[71,7,51,5],[71,8,51,6,"login"],[71,13,51,11],[71,15,51,13,"router"],[71,21,51,19],[71,22,51,20],[71,23,51,21],[72,4,53,2],[72,24,54,4],[72,28,54,4,"_reactJsxDevRuntime"],[72,47,54,4],[72,48,54,4,"jsxDEV"],[72,54,54,4],[72,56,54,5,"View"],[72,60,54,9],[72,61,54,9,"default"],[72,68,54,9],[73,6,54,10,"style"],[73,11,54,15],[73,13,54,17,"styles"],[73,19,54,23],[73,20,54,24,"container"],[73,29,54,34],[74,6,54,34,"children"],[74,14,54,34],[74,29,55,6],[74,33,55,6,"_reactJsxDevRuntime"],[74,52,55,6],[74,53,55,6,"jsxDEV"],[74,59,55,6],[74,61,55,7,"_srcComponentsLoadingScreen"],[74,88,55,20],[74,89,55,20,"LoadingScreen"],[74,102,55,20],[75,8,55,21,"message"],[75,15,55,28],[75,17,55,29],[76,6,55,52],[77,8,55,52,"fileName"],[77,16,55,52],[77,18,55,52,"_jsxFileName"],[77,30,55,52],[78,8,55,52,"lineNumber"],[78,18,55,52],[79,8,55,52,"columnNumber"],[79,20,55,52],[80,6,55,52],[80,13,55,54],[81,4,55,55],[82,6,55,55,"fileName"],[82,14,55,55],[82,16,55,55,"_jsxFileName"],[82,28,55,55],[83,6,55,55,"lineNumber"],[83,16,55,55],[84,6,55,55,"columnNumber"],[84,18,55,55],[85,4,55,55],[85,11,56,10],[85,12,56,11],[86,2,58,0],[87,2,58,1,"_s"],[87,4,58,1],[87,5,8,24,"AuthCallback"],[87,17,8,36],[88,4,8,36],[88,12,9,17,"useRouter"],[88,23,9,26],[88,24,9,26,"useRouter"],[88,33,9,26],[88,35,10,29,"useAuth"],[88,57,10,36],[88,58,10,36,"useAuth"],[88,65,10,36],[89,2,10,36],[90,2,10,36,"_c"],[90,4,10,36],[90,7,8,24,"AuthCallback"],[90,19,8,36],[91,2,60,0],[91,8,60,6,"styles"],[91,14,60,12],[91,17,60,15,"StyleSheet"],[91,27,60,25],[91,28,60,25,"default"],[91,35,60,25],[91,36,60,26,"create"],[91,42,60,32],[91,43,60,33],[92,4,61,2,"container"],[92,13,61,11],[92,15,61,13],[93,6,62,4,"flex"],[93,10,62,8],[93,12,62,10],[93,13,62,11],[94,6,63,4,"backgroundColor"],[94,21,63,19],[94,23,63,21,"theme"],[94,37,63,26],[94,38,63,26,"theme"],[94,43,63,26],[94,44,63,27,"colors"],[94,50,63,33],[94,51,63,34,"background"],[95,4,64,2],[96,2,65,0],[96,3,65,1],[96,4,65,2],[97,2,65,3],[97,6,65,3,"_c"],[97,8,65,3],[98,2,65,3,"$RefreshReg$"],[98,14,65,3],[98,15,65,3,"_c"],[98,17,65,3],[99,0,65,3],[99,3]],"functionMap":{"names":["<global>","AuthCallback","useEffect$argument_0","processAuth"],"mappings":"AAA;eCO;YCK;wBCK;KD8B;GDG;CDO"},"hasCjsExports":false},"type":"js/module"}]}