{"dependencies":[{"name":"@babel/runtime/helpers/asyncToGenerator","data":{"asyncType":null,"isESMImport":false,"locs":[],"key":"YisBBiy2Xm9DEVdFebZ2nbgAHBo=","exportNames":["*"],"imports":1}},{"name":"react","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":1,"column":0,"index":0},"end":{"line":1,"column":49,"index":49}}],"key":"RtGiGa+/H7VrI7GDQDLhO1UbpU8=","exportNames":["*"],"imports":1}},{"name":"react-native","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":2,"column":0,"index":50},"end":{"line":2,"column":54,"index":104}}],"key":"KyzuX10g6ixS9UfynhmjlvCIG3g=","exportNames":["*"],"imports":1}},{"name":"expo-router","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":3,"column":0,"index":105},"end":{"line":3,"column":40,"index":145}}],"key":"/+ErnBisjrT6aDU+GRp5Qz/lYoY=","exportNames":["*"],"imports":1}},{"name":"../src/context/AuthContext","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":4,"column":0,"index":146},"end":{"line":4,"column":53,"index":199}}],"key":"YFOiIQT6E6I699spMpMTUXmic+k=","exportNames":["*"],"imports":1}},{"name":"../src/components/LoadingScreen","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":5,"column":0,"index":200},"end":{"line":5,"column":64,"index":264}}],"key":"hvRn6/xKdqj61ncZeFCUaBw1KU4=","exportNames":["*"],"imports":1}},{"name":"../src/utils/theme","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":6,"column":0,"index":265},"end":{"line":6,"column":43,"index":308}}],"key":"qK0DKJeSaeFiWAj5xn3qkpKNWIQ=","exportNames":["*"],"imports":1}},{"name":"react/jsx-dev-runtime","data":{"asyncType":null,"isESMImport":false,"locs":[],"key":"L9D70Z4hi4aGuui1ysja/oQ5ytI=","exportNames":["*"],"imports":1}}],"output":[{"data":{"code":"__d(function (global, require, _$$_IMPORT_DEFAULT, _$$_IMPORT_ALL, module, exports, _dependencyMap) {\n  \"use strict\";\n\n  var _jsxFileName = \"/app/frontend/app/auth-callback.tsx\",\n    _s = $RefreshSig$();\n  Object.defineProperty(exports, '__esModule', {\n    value: true\n  });\n  function _interopDefault(e) {\n    return e && e.__esModule ? e : {\n      default: e\n    };\n  }\n  Object.defineProperty(exports, \"default\", {\n    enumerable: true,\n    get: function () {\n      return AuthCallback;\n    }\n  });\n  var _babelRuntimeHelpersAsyncToGenerator = require(_dependencyMap[0], \"@babel/runtime/helpers/asyncToGenerator\");\n  var _asyncToGenerator = _interopDefault(_babelRuntimeHelpersAsyncToGenerator);\n  var _react = require(_dependencyMap[1], \"react\");\n  var _reactNative = require(_dependencyMap[2], \"react-native\");\n  var _expoRouter = require(_dependencyMap[3], \"expo-router\");\n  var _srcContextAuthContext = require(_dependencyMap[4], \"../src/context/AuthContext\");\n  var _srcComponentsLoadingScreen = require(_dependencyMap[5], \"../src/components/LoadingScreen\");\n  var _srcUtilsTheme = require(_dependencyMap[6], \"../src/utils/theme\");\n  var _reactJsxDevRuntime = require(_dependencyMap[7], \"react/jsx-dev-runtime\");\n  function AuthCallback() {\n    _s();\n    var router = (0, _expoRouter.useRouter)();\n    var _useAuth = (0, _srcContextAuthContext.useAuth)(),\n      login = _useAuth.login,\n      setUser = _useAuth.setUser;\n    var hasProcessed = (0, _react.useRef)(false);\n    (0, _react.useEffect)(() => {\n      // Use useRef to prevent double processing in StrictMode\n      if (hasProcessed.current) return;\n      hasProcessed.current = true;\n      var processAuth = /*#__PURE__*/function () {\n        var _ref = (0, _asyncToGenerator.default)(function* () {\n          try {\n            // Get session_id from URL hash\n            var sessionId = null;\n            if (typeof window !== 'undefined') {\n              var hash = window.location.hash;\n              var params = new URLSearchParams(hash.replace('#', ''));\n              sessionId = params.get('session_id');\n            }\n            if (!sessionId) {\n              console.error('No session_id found in URL');\n              router.replace('/');\n              return;\n            }\n\n            // Exchange session_id for session_token\n            yield login(sessionId);\n\n            // Clean up URL and redirect to dashboard\n            if (typeof window !== 'undefined') {\n              window.history.replaceState({}, document.title, window.location.pathname);\n            }\n            router.replace('/(tabs)/dashboard');\n          } catch (error) {\n            console.error('Auth callback error:', error);\n            router.replace('/');\n          }\n        });\n        return function processAuth() {\n          return _ref.apply(this, arguments);\n        };\n      }();\n      processAuth();\n    }, [login, router]);\n    return /*#__PURE__*/(0, _reactJsxDevRuntime.jsxDEV)(_reactNative.View, {\n      style: styles.container,\n      children: /*#__PURE__*/(0, _reactJsxDevRuntime.jsxDEV)(_srcComponentsLoadingScreen.LoadingScreen, {\n        message: \"Completing sign in...\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 55,\n        columnNumber: 7\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 54,\n      columnNumber: 5\n    }, this);\n  }\n  _s(AuthCallback, \"iZ7TuO7cn7hCwanSZ61/tFsihHw=\", false, function () {\n    return [_expoRouter.useRouter, _srcContextAuthContext.useAuth];\n  });\n  _c = AuthCallback;\n  var styles = _reactNative.StyleSheet.create({\n    container: {\n      flex: 1,\n      backgroundColor: _srcUtilsTheme.theme.colors.background\n    }\n  });\n  var _c;\n  $RefreshReg$(_c, \"AuthCallback\");\n});","lineCount":102,"map":[[14,2,8,15,"Object"],[14,8,8,15],[14,9,8,15,"defineProperty"],[14,23,8,15],[14,24,8,15,"exports"],[14,31,8,15],[15,4,8,15,"enumerable"],[15,14,8,15],[16,4,8,15,"get"],[16,7,8,15],[16,18,8,15,"get"],[16,19,8,15],[17,6,8,15],[17,13,8,15,"AuthCallback"],[17,25,8,15],[18,4,8,15],[19,2,8,15],[20,2,58,1],[20,6,58,1,"_babelRuntimeHelpersAsyncToGenerator"],[20,42,58,1],[20,45,58,1,"require"],[20,52,58,1],[20,53,58,1,"_dependencyMap"],[20,67,58,1],[21,2,58,1],[21,6,58,1,"_asyncToGenerator"],[21,23,58,1],[21,26,58,1,"_interopDefault"],[21,41,58,1],[21,42,58,1,"_babelRuntimeHelpersAsyncToGenerator"],[21,78,58,1],[22,2,1,0],[22,6,1,0,"_react"],[22,12,1,0],[22,15,1,0,"require"],[22,22,1,0],[22,23,1,0,"_dependencyMap"],[22,37,1,0],[23,2,2,0],[23,6,2,0,"_reactNative"],[23,18,2,0],[23,21,2,0,"require"],[23,28,2,0],[23,29,2,0,"_dependencyMap"],[23,43,2,0],[24,2,3,0],[24,6,3,0,"_expoRouter"],[24,17,3,0],[24,20,3,0,"require"],[24,27,3,0],[24,28,3,0,"_dependencyMap"],[24,42,3,0],[25,2,4,0],[25,6,4,0,"_srcContextAuthContext"],[25,28,4,0],[25,31,4,0,"require"],[25,38,4,0],[25,39,4,0,"_dependencyMap"],[25,53,4,0],[26,2,5,0],[26,6,5,0,"_srcComponentsLoadingScreen"],[26,33,5,0],[26,36,5,0,"require"],[26,43,5,0],[26,44,5,0,"_dependencyMap"],[26,58,5,0],[27,2,6,0],[27,6,6,0,"_srcUtilsTheme"],[27,20,6,0],[27,23,6,0,"require"],[27,30,6,0],[27,31,6,0,"_dependencyMap"],[27,45,6,0],[28,2,6,43],[28,6,6,43,"_reactJsxDevRuntime"],[28,25,6,43],[28,28,6,43,"require"],[28,35,6,43],[28,36,6,43,"_dependencyMap"],[28,50,6,43],[29,2,8,15],[29,11,8,24,"AuthCallback"],[29,23,8,36,"AuthCallback"],[29,24,8,36],[29,26,8,39],[30,4,8,39,"_s"],[30,6,8,39],[31,4,9,2],[31,8,9,8,"router"],[31,14,9,14],[31,17,9,17],[31,21,9,17,"useRouter"],[31,32,9,26],[31,33,9,26,"useRouter"],[31,42,9,26],[31,44,9,27],[31,45,9,28],[32,4,10,2],[32,8,10,2,"_useAuth"],[32,16,10,2],[32,19,10,29],[32,23,10,29,"useAuth"],[32,45,10,36],[32,46,10,36,"useAuth"],[32,53,10,36],[32,55,10,37],[32,56,10,38],[33,6,10,10,"login"],[33,11,10,15],[33,14,10,15,"_useAuth"],[33,22,10,15],[33,23,10,10,"login"],[33,28,10,15],[34,6,10,17,"setUser"],[34,13,10,24],[34,16,10,24,"_useAuth"],[34,24,10,24],[34,25,10,17,"setUser"],[34,32,10,24],[35,4,11,2],[35,8,11,8,"hasProcessed"],[35,20,11,20],[35,23,11,23],[35,27,11,23,"useRef"],[35,33,11,29],[35,34,11,29,"useRef"],[35,40,11,29],[35,42,11,30],[35,47,11,35],[35,48,11,36],[36,4,13,2],[36,8,13,2,"useEffect"],[36,14,13,11],[36,15,13,11,"useEffect"],[36,24,13,11],[36,26,13,12],[36,32,13,18],[37,6,14,4],[38,6,15,4],[38,10,15,8,"hasProcessed"],[38,22,15,20],[38,23,15,21,"current"],[38,30,15,28],[38,32,15,30],[39,6,16,4,"hasProcessed"],[39,18,16,16],[39,19,16,17,"current"],[39,26,16,24],[39,29,16,27],[39,33,16,31],[40,6,18,4],[40,10,18,10,"processAuth"],[40,21,18,21],[41,8,18,21],[41,12,18,21,"_ref"],[41,16,18,21],[41,23,18,21,"_asyncToGenerator"],[41,40,18,21],[41,41,18,21,"default"],[41,48,18,21],[41,50,18,24],[41,63,18,36],[42,10,19,6],[42,14,19,10],[43,12,20,8],[44,12,21,8],[44,16,21,12,"sessionId"],[44,25,21,36],[44,28,21,39],[44,32,21,43],[45,12,23,8],[45,16,23,12],[45,23,23,19,"window"],[45,29,23,25],[45,34,23,30],[45,45,23,41],[45,47,23,43],[46,14,24,10],[46,18,24,16,"hash"],[46,22,24,20],[46,25,24,23,"window"],[46,31,24,29],[46,32,24,30,"location"],[46,40,24,38],[46,41,24,39,"hash"],[46,45,24,43],[47,14,25,10],[47,18,25,16,"params"],[47,24,25,22],[47,27,25,25],[47,31,25,29,"URLSearchParams"],[47,46,25,44],[47,47,25,45,"hash"],[47,51,25,49],[47,52,25,50,"replace"],[47,59,25,57],[47,60,25,58],[47,63,25,61],[47,65,25,63],[47,67,25,65],[47,68,25,66],[47,69,25,67],[48,14,26,10,"sessionId"],[48,23,26,19],[48,26,26,22,"params"],[48,32,26,28],[48,33,26,29,"get"],[48,36,26,32],[48,37,26,33],[48,49,26,45],[48,50,26,46],[49,12,27,8],[50,12,29,8],[50,16,29,12],[50,17,29,13,"sessionId"],[50,26,29,22],[50,28,29,24],[51,14,30,10,"console"],[51,21,30,17],[51,22,30,18,"error"],[51,27,30,23],[51,28,30,24],[51,56,30,52],[51,57,30,53],[52,14,31,10,"router"],[52,20,31,16],[52,21,31,17,"replace"],[52,28,31,24],[52,29,31,25],[52,32,31,28],[52,33,31,29],[53,14,32,10],[54,12,33,8],[56,12,35,8],[57,12,36,8],[57,18,36,14,"login"],[57,23,36,19],[57,24,36,20,"sessionId"],[57,33,36,29],[57,34,36,30],[59,12,38,8],[60,12,39,8],[60,16,39,12],[60,23,39,19,"window"],[60,29,39,25],[60,34,39,30],[60,45,39,41],[60,47,39,43],[61,14,40,10,"window"],[61,20,40,16],[61,21,40,17,"history"],[61,28,40,24],[61,29,40,25,"replaceState"],[61,41,40,37],[61,42,40,38],[61,43,40,39],[61,44,40,40],[61,46,40,42,"document"],[61,54,40,50],[61,55,40,51,"title"],[61,60,40,56],[61,62,40,58,"window"],[61,68,40,64],[61,69,40,65,"location"],[61,77,40,73],[61,78,40,74,"pathname"],[61,86,40,82],[61,87,40,83],[62,12,41,8],[63,12,43,8,"router"],[63,18,43,14],[63,19,43,15,"replace"],[63,26,43,22],[63,27,43,23],[63,46,43,42],[63,47,43,43],[64,10,44,6],[64,11,44,7],[64,12,44,8],[64,19,44,15,"error"],[64,24,44,20],[64,26,44,22],[65,12,45,8,"console"],[65,19,45,15],[65,20,45,16,"error"],[65,25,45,21],[65,26,45,22],[65,48,45,44],[65,50,45,46,"error"],[65,55,45,51],[65,56,45,52],[66,12,46,8,"router"],[66,18,46,14],[66,19,46,15,"replace"],[66,26,46,22],[66,27,46,23],[66,30,46,26],[66,31,46,27],[67,10,47,6],[68,8,48,4],[68,9,48,5],[69,8,48,5],[69,24,18,10,"processAuth"],[69,35,18,21,"processAuth"],[69,36,18,21],[70,10,18,21],[70,17,18,21,"_ref"],[70,21,18,21],[70,22,18,21,"apply"],[70,27,18,21],[70,34,18,21,"arguments"],[70,43,18,21],[71,8,18,21],[72,6,18,21],[72,9,48,5],[73,6,50,4,"processAuth"],[73,17,50,15],[73,18,50,16],[73,19,50,17],[74,4,51,2],[74,5,51,3],[74,7,51,5],[74,8,51,6,"login"],[74,13,51,11],[74,15,51,13,"router"],[74,21,51,19],[74,22,51,20],[74,23,51,21],[75,4,53,2],[75,24,54,4],[75,28,54,4,"_reactJsxDevRuntime"],[75,47,54,4],[75,48,54,4,"jsxDEV"],[75,54,54,4],[75,56,54,5,"_reactNative"],[75,68,54,9],[75,69,54,9,"View"],[75,73,54,9],[76,6,54,10,"style"],[76,11,54,15],[76,13,54,17,"styles"],[76,19,54,23],[76,20,54,24,"container"],[76,29,54,34],[77,6,54,34,"children"],[77,14,54,34],[77,29,55,6],[77,33,55,6,"_reactJsxDevRuntime"],[77,52,55,6],[77,53,55,6,"jsxDEV"],[77,59,55,6],[77,61,55,7,"_srcComponentsLoadingScreen"],[77,88,55,20],[77,89,55,20,"LoadingScreen"],[77,102,55,20],[78,8,55,21,"message"],[78,15,55,28],[78,17,55,29],[79,6,55,52],[80,8,55,52,"fileName"],[80,16,55,52],[80,18,55,52,"_jsxFileName"],[80,30,55,52],[81,8,55,52,"lineNumber"],[81,18,55,52],[82,8,55,52,"columnNumber"],[82,20,55,52],[83,6,55,52],[83,13,55,54],[84,4,55,55],[85,6,55,55,"fileName"],[85,14,55,55],[85,16,55,55,"_jsxFileName"],[85,28,55,55],[86,6,55,55,"lineNumber"],[86,16,55,55],[87,6,55,55,"columnNumber"],[87,18,55,55],[88,4,55,55],[88,11,56,10],[88,12,56,11],[89,2,58,0],[90,2,58,1,"_s"],[90,4,58,1],[90,5,8,24,"AuthCallback"],[90,17,8,36],[91,4,8,36],[91,12,9,17,"useRouter"],[91,23,9,26],[91,24,9,26,"useRouter"],[91,33,9,26],[91,35,10,29,"useAuth"],[91,57,10,36],[91,58,10,36,"useAuth"],[91,65,10,36],[92,2,10,36],[93,2,10,36,"_c"],[93,4,10,36],[93,7,8,24,"AuthCallback"],[93,19,8,36],[94,2,60,0],[94,6,60,6,"styles"],[94,12,60,12],[94,15,60,15,"StyleSheet"],[94,27,60,25],[94,28,60,25,"StyleSheet"],[94,38,60,25],[94,39,60,26,"create"],[94,45,60,32],[94,46,60,33],[95,4,61,2,"container"],[95,13,61,11],[95,15,61,13],[96,6,62,4,"flex"],[96,10,62,8],[96,12,62,10],[96,13,62,11],[97,6,63,4,"backgroundColor"],[97,21,63,19],[97,23,63,21,"theme"],[97,37,63,26],[97,38,63,26,"theme"],[97,43,63,26],[97,44,63,27,"colors"],[97,50,63,33],[97,51,63,34,"background"],[98,4,64,2],[99,2,65,0],[99,3,65,1],[99,4,65,2],[100,2,65,3],[100,6,65,3,"_c"],[100,8,65,3],[101,2,65,3,"$RefreshReg$"],[101,14,65,3],[101,15,65,3,"_c"],[101,17,65,3],[102,0,65,3],[102,3]],"functionMap":{"names":["<global>","AuthCallback","useEffect$argument_0","processAuth"],"mappings":"AAA;eCO;YCK;wBCK;KD8B;GDG;CDO"},"hasCjsExports":false},"type":"js/module"}]}